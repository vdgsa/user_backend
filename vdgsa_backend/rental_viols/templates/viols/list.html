{% extends '../rentals.html' %}
{% load rental_tags %}

{% block content %}
<div class="card">
  <div class="card-body">
  <a class="btn btn-primary" href="{% url 'add-viol' %}">Add Viol</a>
  </div>
</div>

<div class="card">
  <div class="card-body">
    <form method="get" action="{% url 'list-viols' %}">
      <div class="form-row">
        <div class="form-group ">
    <label for="filter">Filter {{filter}}</label>
          <select class="form-control" name="filter" id="filter" onchange="javascript:this.form.submit()">
            <option value="available"{% ifequal 'available' filter  %}selected{% endifequal %}>Available</option>
            <option value='rented' {% ifequal 'rented' filter  %}selected{% endifequal %}>Rented</option>
            <option value='retired' {% ifequal 'retired' filter  %}selected{% endifequal %}>Retired</option>
            <option value='all' {% ifequal 'all' filter  %}selected{% endifequal %}>All</option>
          </select>
        </div>
      </div>
    </form>
</div>
</div>
<table id="viol-table" class="table table-striped">
  <thead>
    <tr>
      <td>VdGSA number</td>
      <td>Size</td>
      <td># Strings</td>
      <td>Maker</td>
      <td>Value</td>
      <td>Program</td>
      <td>State</td>
      <td>Reserved for</td>
     
    </tr>
  </thead>
  <tbody>
    {% for item in object_list %}
    <tr>
      <td>
        <a href="{% url 'viol-detail' pk=item.pk %}">{{item.vdgsa_number}}</a>
      </td>
      <td>{{item.size}}</td>
      <td>{{item.strings}}</td>
      <td>{{item.maker}}</td>
      <td>{{item.value | currency}}</td>
      <td>{{item.program}}</td>
      <td>{{item.state}}</td>
      <td>
      {% if item.waitingList.all %}

          {% for wl in item.waitingList.all %}
          <div>
            {{ wl }}
          </div>
          {% endfor %}
      {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
