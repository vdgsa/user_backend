{% extends 'base.html' %}
{% block content %}

{% load vdgsa_tags %}

<h2 id="registration-landing-header">
  {{request.user | show_name}},
  Welcome to Conclave {{conclave_config.year}} Registration!
  {% if conclave_config.phase == 'late' %}
  (Late)
  {% endif %}
</h2>

{% if not request.user.subscription_is_current %}
<div data-testid="membership_renewal_message">
  Your membership is not up to date. Please visit the
  <a data-testid="accounts_link" href="{% url 'current-user-account' %}">My Account</a> page,
  renew your membership, and then return here to register.
</div>
{% elif conclave_config.phase == 'closed' and not perms.conclave_registration.conclave_team %}
<div data-testid="registration_closed_message">
  Registration for this year's conclave has closed.
</div>
{% else %}

<div class="row">
  <div class="col-md-6 order-md-2">
    <table class="table">
      <thead>
        <tr>
          <td class="fs-5">Programs</td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <div><b>Regular Curriculum (part- and full-time)</b></div>
            <div class="mt-1">I can haz description plz</div>
          </td>
        </tr>
        <tr>
          <td>
            <div><b>Beginner Programs (both teen and adult)</b></div>
            <div class="mt-1">I can haz description plz</div>
          </td>
        </tr>
        <tr>
          <td>
            <div><b>Consort Cooperative</b></div>
            <div class="mt-1">I can haz description plz</div>
          </td>
        </tr>
        <tr>
          <td>
            <div><b>Seasoned Players</b></div>
            <div class="mt-1">I can haz description plz</div>
          </td>
        </tr>
        <tr>
          <td>
            <div><b>Advanced Projects</b></div>
            <div class="mt-1">I can haz description plz</div>
          </td>
        </tr>
        <tr>
          <td>
            <div><b>Vendors</b></div>
            <div class="mt-1">I can haz description plz</div>
          </td>
        </tr>
        <tr>
          <td>
            <div><b>Faculty/Guest/Other</b></div>
            <div class="mt-1">I can haz description plz</div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="col-md-6 order-md-1">
    <div>
      Your membership contact info will be used for Conclave. <br>
      If you'd like to change it, please do so on the
      <a href="{% url 'current-user-account' %}">My Account</a> section of the website.
    </div>

    <form method="post">
      {% csrf_token %}
      <div class="row mt-4">
        <div class="col-auto ">
          {% include 'utils/form_field.tmpl' with field=choose_program_form.program %}
        </div>
      </div>

      <div class="row mt-2">
        <div id="faculty-registration-password" class="col-auto">
          {% include 'utils/form_field.tmpl' with field=choose_program_form.faculty_registration_password %}
        </div>
      </div>

      <div class="mt-2">
        <button type="submit" class="btn btn-primary">Start Registration</button>
      </div>

      {% if form.non_field_errors %}
      <div class="non-field-errors">
      {% for err in form.non_field_errors %}
        <p class="form-error">{{ err }}</p>
      {% endfor %}
      </div>
      {% endif %}
    </form>
  </div>
</div>
{% endif %}

<script>
$().ready(function() {
  if ($('#id_program').val() === 'faculty_guest_other') {
    $('#faculty-registration-password').show();
  }

  $('#id_program').on('change', function(event) {
    if (event.target.value === 'faculty_guest_other') {
      $('#faculty-registration-password').show();
    }
    else {
      $('#faculty-registration-password').hide();
    }
  });
});
</script>
{% endblock %}

{% block page_style %}
<style>
  #faculty-registration-password {
    display: none;
  }
</style>
{% endblock %}
